{
  "file_path": "selected_100_files\\medium_201_500\\015_Diff.php",
  "rector_analysis": {
    "php_version_changes": 8,
    "rules_triggered": [
      "Rector\\DeadCode\\Rector\\StaticCall\\RemoveParentCallWithoutParentRector",
      "Rector\\Php52\\Rector\\Property\\VarToPublicPropertyRector",
      "Rector\\Php53\\Rector\\FuncCall\\DirNameFileConstantToDirConstantRector",
      "Rector\\Php54\\Rector\\Array_\\LongArrayToShortArrayRector",
      "Rector\\Php70\\Rector\\ClassMethod\\Php4ConstructorRector",
      "Rector\\Php80\\Rector\\FuncCall\\ClassOnObjectRector",
      "Rector\\Php83\\Rector\\ClassMethod\\AddOverrideAttributeToOverriddenMethodsRector",
      "Rector\\TypeDeclaration\\Rector\\ClassMethod\\ReturnNeverTypeRector"
    ],
    "changes_by_php_version": {
      "php_52": 1,
      "php_53": 1,
      "php_54": 1,
      "php_70": 1,
      "php_80": 1,
      "php_83": 1
    },
    "has_diff": true,
    "diff_line_count": 192
  },
  "analysis_metadata": {
    "rector_version": "2.1.0",
    "analysis_date": "2025-08-31T05:18:41.139157",
    "file_size_kb": 11.7,
    "analysis_type": "version_specific_only"
  },
  "raw_rector_output": {
    "totals": {
      "changed_files": 1,
      "errors": 0
    },
    "file_diffs": [
      {
        "file": "selected_100_files/medium_201_500/015_Diff.php",
        "diff": "--- Original\n+++ New\n@@ -22,7 +22,7 @@\n      *\n      * @var array\n      */\n-    var $_edits;\n+    public $_edits;\n \n     /**\n      * Computes diffs between sequences of strings.\n@@ -33,11 +33,11 @@\n      *                           Normally an array of two arrays, each\n      *                           containing the lines from a file.\n      */\n-    function Text_Diff($engine, $params)\n+    function __construct($engine, $params)\n     {\n         // Backward compatibility workaround.\n         if (!is_string($engine)) {\n-            $params = array($engine, $params);\n+            $params = [$engine, $params];\n             $engine = 'auto';\n         }\n \n@@ -48,11 +48,11 @@\n         }\n \n         // WP #7391\n-        require_once dirname(__FILE__).'/Diff/Engine/' . $engine . '.php';\n+        require_once __DIR__.'/Diff/Engine/' . $engine . '.php';\n         $class = 'Text_Diff_Engine_' . $engine;\n         $diff_engine = new $class();\n \n-        $this->_edits = call_user_func_array(array($diff_engine, 'diff'), $params);\n+        $this->_edits = call_user_func_array([$diff_engine, 'diff'], $params);\n     }\n \n     /**\n@@ -122,7 +122,7 @@\n         } else {\n             $rev = $this;\n         }\n-        $rev->_edits = array();\n+        $rev->_edits = [];\n         foreach ($this->_edits as $edit) {\n             $rev->_edits[] = $edit->reverse();\n         }\n@@ -171,7 +171,7 @@\n      */\n     function getOriginal()\n     {\n-        $lines = array();\n+        $lines = [];\n         foreach ($this->_edits as $edit) {\n             if ($edit->orig) {\n                 array_splice($lines, count($lines), 0, $edit->orig);\n@@ -189,7 +189,7 @@\n      */\n     function getFinal()\n     {\n-        $lines = array();\n+        $lines = [];\n         foreach ($this->_edits as $edit) {\n             if ($edit->final) {\n                 array_splice($lines, count($lines), 0, $edit->final);\n@@ -207,7 +207,7 @@\n      */\n     static function trimNewlines(&$line, $key)\n     {\n-        $line = str_replace(array(\"\\n\", \"\\r\"), '', $line);\n+        $line = str_replace([\"\\n\", \"\\r\"], '', $line);\n     }\n \n     /**\n@@ -222,8 +222,8 @@\n      */\n     function _getTempDir()\n     {\n-        $tmp_locations = array('/tmp', '/var/tmp', 'c:\\WUTemp', 'c:\\temp',\n-                               'c:\\windows\\temp', 'c:\\winnt\\temp');\n+        $tmp_locations = ['/tmp', '/var/tmp', 'c:\\WUTemp', 'c:\\temp',\n+                               'c:\\windows\\temp', 'c:\\winnt\\temp'];\n \n         /* Try PHP's upload_tmp_dir directive. */\n         $tmp = ini_get('upload_tmp_dir');\n@@ -271,10 +271,10 @@\n \n         $prevtype = null;\n         foreach ($this->_edits as $edit) {\n-            if ($prevtype == get_class($edit)) {\n+            if ($prevtype == $edit::class) {\n                 trigger_error(\"Edit sequence is non-optimal\", E_USER_ERROR);\n             }\n-            $prevtype = get_class($edit);\n+            $prevtype = $edit::class;\n         }\n \n         return true;\n@@ -304,14 +304,12 @@\n      * @param array $mapped_to_lines    This array should have the same number\n      *                                  of elements as $to_lines.\n      */\n-    function Text_MappedDiff($from_lines, $to_lines,\n+    function __construct($from_lines, $to_lines,\n                              $mapped_from_lines, $mapped_to_lines)\n     {\n         assert(count($from_lines) == count($mapped_from_lines));\n         assert(count($to_lines) == count($mapped_to_lines));\n \n-        parent::Text_Diff($mapped_from_lines, $mapped_to_lines);\n-\n         $xi = $yi = 0;\n         for ($i = 0; $i < count($this->_edits); $i++) {\n             $orig = &$this->_edits[$i]->orig;\n@@ -338,10 +336,10 @@\n  */\n class Text_Diff_Op {\n \n-    var $orig;\n-    var $final;\n+    public $orig;\n+    public $final;\n \n-    function &reverse()\n+    function &reverse(): never\n     {\n         trigger_error('Abstract method', E_USER_ERROR);\n     }\n@@ -366,7 +364,7 @@\n  */\n class Text_Diff_Op_copy extends Text_Diff_Op {\n \n-    function Text_Diff_Op_copy($orig, $final = false)\n+    function __construct($orig, $final = false)\n     {\n         if (!is_array($final)) {\n             $final = $orig;\n@@ -375,6 +373,7 @@\n         $this->final = $final;\n     }\n \n+    #[\\Override]\n     function &reverse()\n     {\n         $reverse = new Text_Diff_Op_copy($this->final, $this->orig);\n@@ -391,12 +390,13 @@\n  */\n class Text_Diff_Op_delete extends Text_Diff_Op {\n \n-    function Text_Diff_Op_delete($lines)\n+    function __construct($lines)\n     {\n         $this->orig = $lines;\n         $this->final = false;\n     }\n \n+    #[\\Override]\n     function &reverse()\n     {\n         $reverse = new Text_Diff_Op_add($this->orig);\n@@ -413,12 +413,13 @@\n  */\n class Text_Diff_Op_add extends Text_Diff_Op {\n \n-    function Text_Diff_Op_add($lines)\n+    function __construct($lines)\n     {\n         $this->final = $lines;\n         $this->orig = false;\n     }\n \n+    #[\\Override]\n     function &reverse()\n     {\n         $reverse = new Text_Diff_Op_delete($this->final);\n@@ -435,12 +436,13 @@\n  */\n class Text_Diff_Op_change extends Text_Diff_Op {\n \n-    function Text_Diff_Op_change($orig, $final)\n+    function __construct($orig, $final)\n     {\n         $this->orig = $orig;\n         $this->final = $final;\n     }\n \n+    #[\\Override]\n     function &reverse()\n     {\n         $reverse = new Text_Diff_Op_change($this->final, $this->orig);\n",
        "applied_rectors": [
          "Rector\\DeadCode\\Rector\\StaticCall\\RemoveParentCallWithoutParentRector",
          "Rector\\Php52\\Rector\\Property\\VarToPublicPropertyRector",
          "Rector\\Php53\\Rector\\FuncCall\\DirNameFileConstantToDirConstantRector",
          "Rector\\Php54\\Rector\\Array_\\LongArrayToShortArrayRector",
          "Rector\\Php70\\Rector\\ClassMethod\\Php4ConstructorRector",
          "Rector\\Php80\\Rector\\FuncCall\\ClassOnObjectRector",
          "Rector\\Php83\\Rector\\ClassMethod\\AddOverrideAttributeToOverriddenMethodsRector",
          "Rector\\TypeDeclaration\\Rector\\ClassMethod\\ReturnNeverTypeRector"
        ]
      }
    ],
    "changed_files": [
      "selected_100_files/medium_201_500/015_Diff.php"
    ]
  }
}