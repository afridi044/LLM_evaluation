{
  "file_path": "selected_100_files\\medium_201_500\\027_upload.php",
  "rector_analysis": {
    "php_version_changes": 6,
    "rules_triggered": [
      "Rector\\Php53\\Rector\\FuncCall\\DirNameFileConstantToDirConstantRector",
      "Rector\\Php53\\Rector\\Ternary\\TernaryToElvisRector",
      "Rector\\Php54\\Rector\\Array_\\LongArrayToShortArrayRector",
      "Rector\\Php70\\Rector\\Ternary\\TernaryToNullCoalescingRector",
      "Rector\\Php80\\Rector\\NotIdentical\\StrContainsRector",
      "Rector\\Php81\\Rector\\FuncCall\\NullToStrictStringFuncCallArgRector"
    ],
    "changes_by_php_version": {
      "php_53": 2,
      "php_54": 1,
      "php_70": 1,
      "php_80": 1,
      "php_81": 1
    },
    "has_diff": true,
    "diff_line_count": 199
  },
  "analysis_metadata": {
    "rector_version": "2.1.0",
    "analysis_date": "2025-08-31T05:19:17.693028",
    "file_size_kb": 11.7,
    "analysis_type": "version_specific_only"
  },
  "raw_rector_output": {
    "totals": {
      "changed_files": 1,
      "errors": 0
    },
    "file_diffs": [
      {
        "file": "selected_100_files/medium_201_500/027_upload.php",
        "diff": "--- Original\n+++ New\n@@ -7,13 +7,13 @@\n  */\n \n /** WordPress Administration Bootstrap */\n-require_once( dirname( __FILE__ ) . '/admin.php' );\n+require_once( __DIR__ . '/admin.php' );\n \n if ( !current_user_can('upload_files') )\n \twp_die( __( 'You do not have permission to upload files.' ) );\n \n-$mode = get_user_option( 'media_library_mode', get_current_user_id() ) ? get_user_option( 'media_library_mode', get_current_user_id() ) : 'grid';\n-$modes = array( 'grid', 'list' );\n+$mode = get_user_option( 'media_library_mode', get_current_user_id() ) ?: 'grid';\n+$modes = [ 'grid', 'list' ];\n \n if ( isset( $_GET['mode'] ) && in_array( $_GET['mode'], $modes ) ) {\n \t$mode = $_GET['mode'];\n@@ -24,11 +24,11 @@\n \twp_enqueue_media();\n \twp_enqueue_script( 'media-grid' );\n \twp_enqueue_script( 'media' );\n-\twp_localize_script( 'media-grid', '_wpMediaGridSettings', array(\n+\twp_localize_script( 'media-grid', '_wpMediaGridSettings', [\n \t\t'adminUrl' => parse_url( self_admin_url(), PHP_URL_PATH ),\n-\t) );\n+\t] );\n \n-\tget_current_screen()->add_help_tab( array(\n+\tget_current_screen()->add_help_tab( [\n \t\t'id'\t\t=> 'overview',\n \t\t'title'\t\t=> __( 'Overview' ),\n \t\t'content'\t=>\n@@ -35,9 +35,9 @@\n \t\t\t'<p>' . __( 'All the files you&#8217;ve uploaded are listed in the Media Library, with the most recent uploads listed first.' ) . '</p>' .\n \t\t\t'<p>' . __( 'You can view your media in a simple visual grid or a list with columns. Switch between these views using the icons to the left above the media.' ) . '</p>' .\n \t\t\t'<p>' . __( 'To delete media items, click the Bulk Select button at the top of the screen. Select any items you wish to delete, then click the Delete Selected button. Clicking the Cancel Selection button takes you back to viewing your media.' ) . '</p>'\n-\t) );\n+\t] );\n \n-\tget_current_screen()->add_help_tab( array(\n+\tget_current_screen()->add_help_tab( [\n \t\t'id'\t\t=> 'attachment-details',\n \t\t'title'\t\t=> __( 'Attachment Details' ),\n \t\t'content'\t=>\n@@ -44,7 +44,7 @@\n \t\t\t'<p>' . __( 'Clicking an item will display an Attachment Details dialog, which allows you to preview media and make quick edits. Any changes you make to the attachment details will be automatically saved.' ) . '</p>' .\n \t\t\t'<p>' . __( 'Use the arrow buttons at the top of the dialog, or the left and right arrow keys on your keyboard, to navigate between media items quickly.' ) . '</p>' .\n \t\t\t'<p>' . __( 'You can also delete individual items and access the extended edit screen from the details dialog.' ) . '</p>'\n-\t) );\n+\t] );\n \n \tget_current_screen()->set_help_sidebar(\n \t\t'<p><strong>' . __( 'For more information:' ) . '</strong></p>' .\n@@ -90,13 +90,13 @@\n \t} elseif ( isset( $_REQUEST['media'] ) ) {\n \t\t$post_ids = $_REQUEST['media'];\n \t} elseif ( isset( $_REQUEST['ids'] ) ) {\n-\t\t$post_ids = explode( ',', $_REQUEST['ids'] );\n+\t\t$post_ids = explode( ',', (string) $_REQUEST['ids'] );\n \t}\n \n \t$location = 'upload.php';\n \tif ( $referer = wp_get_referer() ) {\n-\t\tif ( false !== strpos( $referer, 'upload.php' ) )\n-\t\t\t$location = remove_query_arg( array( 'trashed', 'untrashed', 'deleted', 'message', 'ids', 'posted' ), $referer );\n+\t\tif ( str_contains( $referer, 'upload.php' ) )\n+\t\t\t$location = remove_query_arg( [ 'trashed', 'untrashed', 'deleted', 'message', 'ids', 'posted' ], $referer );\n \t}\n \n \tswitch ( $doaction ) {\n@@ -109,7 +109,7 @@\n \t\t\tif ( !current_user_can( 'edit_post', $parent_id ) )\n \t\t\t\twp_die( __( 'You are not allowed to edit this post.' ) );\n \n-\t\t\t$attach = array();\n+\t\t\t$attach = [];\n \t\t\tforeach ( (array) $_REQUEST['media'] as $att_id ) {\n \t\t\t\t$att_id = (int) $att_id;\n \n@@ -130,11 +130,11 @@\n \t\t\tif ( isset( $attached ) ) {\n \t\t\t\t$location = 'upload.php';\n \t\t\t\tif ( $referer = wp_get_referer() ) {\n-\t\t\t\t\tif ( false !== strpos( $referer, 'upload.php' ) )\n+\t\t\t\t\tif ( str_contains( $referer, 'upload.php' ) )\n \t\t\t\t\t\t$location = $referer;\n \t\t\t\t}\n \n-\t\t\t\t$location = add_query_arg( array( 'attached' => $attached ) , $location );\n+\t\t\t\t$location = add_query_arg( [ 'attached' => $attached ] , $location );\n \t\t\t\twp_redirect( $location );\n \t\t\t\texit;\n \t\t\t}\n@@ -149,7 +149,7 @@\n \t\t\t\tif ( !wp_trash_post( $post_id ) )\n \t\t\t\t\twp_die( __( 'Error in moving to trash.' ) );\n \t\t\t}\n-\t\t\t$location = add_query_arg( array( 'trashed' => count( $post_ids ), 'ids' => join( ',', $post_ids ) ), $location );\n+\t\t\t$location = add_query_arg( [ 'trashed' => count( $post_ids ), 'ids' => join( ',', $post_ids ) ], $location );\n \t\t\tbreak;\n \t\tcase 'untrash':\n \t\t\tif ( !isset( $post_ids ) )\n@@ -180,7 +180,7 @@\n \twp_redirect( $location );\n \texit;\n } elseif ( ! empty( $_GET['_wp_http_referer'] ) ) {\n-\t wp_redirect( remove_query_arg( array( '_wp_http_referer', '_wpnonce' ), wp_unslash( $_SERVER['REQUEST_URI'] ) ) );\n+\t wp_redirect( remove_query_arg( [ '_wp_http_referer', '_wpnonce' ], wp_unslash( $_SERVER['REQUEST_URI'] ) ) );\n \t exit;\n }\n \n@@ -191,9 +191,9 @@\n \n wp_enqueue_script( 'media' );\n \n-add_screen_option( 'per_page', array('label' => _x( 'Media items', 'items per page (screen options)' )) );\n+add_screen_option( 'per_page', ['label' => _x( 'Media items', 'items per page (screen options)' )] );\n \n-get_current_screen()->add_help_tab( array(\n+get_current_screen()->add_help_tab( [\n 'id'\t\t=> 'overview',\n 'title'\t\t=> __('Overview'),\n 'content'\t=>\n@@ -200,19 +200,19 @@\n \t'<p>' . __( 'All the files you&#8217;ve uploaded are listed in the Media Library, with the most recent uploads listed first. You can use the Screen Options tab to customize the display of this screen.' ) . '</p>' .\n \t'<p>' . __( 'You can narrow the list by file type/status using the text link filters at the top of the screen. You also can refine the list by date using the dropdown menu above the media table.' ) . '</p>' .\n \t'<p>' . __( 'You can view your media in a simple visual grid or a list with columns. Switch between these views using the icons to the left above the media.' ) . '</p>'\n-) );\n-get_current_screen()->add_help_tab( array(\n+] );\n+get_current_screen()->add_help_tab( [\n 'id'\t\t=> 'actions-links',\n 'title'\t\t=> __('Available Actions'),\n 'content'\t=>\n \t'<p>' . __( 'Hovering over a row reveals action links: Edit, Delete Permanently, and View. Clicking Edit or on the media file&#8217;s name displays a simple screen to edit that individual file&#8217;s metadata. Clicking Delete Permanently will delete the file from the media library (as well as from any posts to which it is currently attached). View will take you to the display page for that file.' ) . '</p>'\n-) );\n-get_current_screen()->add_help_tab( array(\n+] );\n+get_current_screen()->add_help_tab( [\n 'id'\t\t=> 'attaching-files',\n 'title'\t\t=> __('Attaching Files'),\n 'content'\t=>\n \t'<p>' . __( 'If a media file has not been attached to any post, you will see that in the Attached To column, and can click on Attach File to launch a small popup that will allow you to search for a post and attach the file.' ) . '</p>'\n-) );\n+] );\n \n get_current_screen()->set_help_sidebar(\n \t'<p><strong>' . __( 'For more information:' ) . '</strong></p>' .\n@@ -238,39 +238,39 @@\n $message = '';\n if ( ! empty( $_GET['posted'] ) ) {\n \t$message = __('Media attachment updated.');\n-\t$_SERVER['REQUEST_URI'] = remove_query_arg(array('posted'), $_SERVER['REQUEST_URI']);\n+\t$_SERVER['REQUEST_URI'] = remove_query_arg(['posted'], $_SERVER['REQUEST_URI']);\n }\n \n if ( ! empty( $_GET['attached'] ) && $attached = absint( $_GET['attached'] ) ) {\n \t$message = sprintf( _n('Reattached %d attachment.', 'Reattached %d attachments.', $attached), $attached );\n-\t$_SERVER['REQUEST_URI'] = remove_query_arg(array('attached'), $_SERVER['REQUEST_URI']);\n+\t$_SERVER['REQUEST_URI'] = remove_query_arg(['attached'], $_SERVER['REQUEST_URI']);\n }\n \n if ( ! empty( $_GET['deleted'] ) && $deleted = absint( $_GET['deleted'] ) ) {\n \t$message = sprintf( _n( 'Media attachment permanently deleted.', '%d media attachments permanently deleted.', $deleted ), number_format_i18n( $_GET['deleted'] ) );\n-\t$_SERVER['REQUEST_URI'] = remove_query_arg(array('deleted'), $_SERVER['REQUEST_URI']);\n+\t$_SERVER['REQUEST_URI'] = remove_query_arg(['deleted'], $_SERVER['REQUEST_URI']);\n }\n \n if ( ! empty( $_GET['trashed'] ) && $trashed = absint( $_GET['trashed'] ) ) {\n \t$message = sprintf( _n( 'Media attachment moved to the trash.', '%d media attachments moved to the trash.', $trashed ), number_format_i18n( $_GET['trashed'] ) );\n-\t$message .= ' <a href=\"' . esc_url( wp_nonce_url( 'upload.php?doaction=undo&action=untrash&ids='.(isset($_GET['ids']) ? $_GET['ids'] : ''), \"bulk-media\" ) ) . '\">' . __('Undo') . '</a>';\n-\t$_SERVER['REQUEST_URI'] = remove_query_arg(array('trashed'), $_SERVER['REQUEST_URI']);\n+\t$message .= ' <a href=\"' . esc_url( wp_nonce_url( 'upload.php?doaction=undo&action=untrash&ids='.($_GET['ids'] ?? ''), \"bulk-media\" ) ) . '\">' . __('Undo') . '</a>';\n+\t$_SERVER['REQUEST_URI'] = remove_query_arg(['trashed'], $_SERVER['REQUEST_URI']);\n }\n \n if ( ! empty( $_GET['untrashed'] ) && $untrashed = absint( $_GET['untrashed'] ) ) {\n \t$message = sprintf( _n( 'Media attachment restored from the trash.', '%d media attachments restored from the trash.', $untrashed ), number_format_i18n( $_GET['untrashed'] ) );\n-\t$_SERVER['REQUEST_URI'] = remove_query_arg(array('untrashed'), $_SERVER['REQUEST_URI']);\n+\t$_SERVER['REQUEST_URI'] = remove_query_arg(['untrashed'], $_SERVER['REQUEST_URI']);\n }\n \n $messages[1] = __('Media attachment updated.');\n $messages[2] = __('Media permanently deleted.');\n $messages[3] = __('Error saving media attachment.');\n-$messages[4] = __('Media moved to the trash.') . ' <a href=\"' . esc_url( wp_nonce_url( 'upload.php?doaction=undo&action=untrash&ids='.(isset($_GET['ids']) ? $_GET['ids'] : ''), \"bulk-media\" ) ) . '\">' . __('Undo') . '</a>';\n+$messages[4] = __('Media moved to the trash.') . ' <a href=\"' . esc_url( wp_nonce_url( 'upload.php?doaction=undo&action=untrash&ids='.($_GET['ids'] ?? ''), \"bulk-media\" ) ) . '\">' . __('Undo') . '</a>';\n $messages[5] = __('Media restored from the trash.');\n \n if ( ! empty( $_GET['message'] ) && isset( $messages[ $_GET['message'] ] ) ) {\n \t$message = $messages[ $_GET['message'] ];\n-\t$_SERVER['REQUEST_URI'] = remove_query_arg(array('message'), $_SERVER['REQUEST_URI']);\n+\t$_SERVER['REQUEST_URI'] = remove_query_arg(['message'], $_SERVER['REQUEST_URI']);\n }\n \n if ( !empty($message) ) { ?>\n",
        "applied_rectors": [
          "Rector\\Php53\\Rector\\FuncCall\\DirNameFileConstantToDirConstantRector",
          "Rector\\Php53\\Rector\\Ternary\\TernaryToElvisRector",
          "Rector\\Php54\\Rector\\Array_\\LongArrayToShortArrayRector",
          "Rector\\Php70\\Rector\\Ternary\\TernaryToNullCoalescingRector",
          "Rector\\Php80\\Rector\\NotIdentical\\StrContainsRector",
          "Rector\\Php81\\Rector\\FuncCall\\NullToStrictStringFuncCallArgRector"
        ]
      }
    ],
    "changed_files": [
      "selected_100_files/medium_201_500/027_upload.php"
    ]
  }
}