{
  "file_path": "selected_100_files\\medium_201_500\\058_session.php",
  "rector_analysis": {
    "php_version_changes": 4,
    "rules_triggered": [
      "Rector\\Php54\\Rector\\Array_\\LongArrayToShortArrayRector",
      "Rector\\Php70\\Rector\\StmtsAwareInterface\\IfIssetToCoalescingRector",
      "Rector\\Php80\\Rector\\ClassMethod\\FinalPrivateToPrivateVisibilityRector",
      "Rector\\Php80\\Rector\\Class_\\ClassPropertyAssignToConstructorPromotionRector"
    ],
    "changes_by_php_version": {
      "php_54": 1,
      "php_70": 1,
      "php_80": 2
    },
    "has_diff": true,
    "diff_line_count": 122
  },
  "analysis_metadata": {
    "rector_version": "2.1.0",
    "analysis_date": "2025-08-31T05:20:56.813921",
    "file_size_kb": 9.7,
    "analysis_type": "version_specific_only"
  },
  "raw_rector_output": {
    "totals": {
      "changed_files": 1,
      "errors": 0
    },
    "file_diffs": [
      {
        "file": "selected_100_files/medium_201_500/058_session.php",
        "diff": "--- Original\n+++ New\n@@ -7,15 +7,6 @@\n abstract class WP_Session_Tokens {\n \n \t/**\n-\t * User ID.\n-\t *\n-\t * @since 4.0.0\n-\t * @access protected\n-\t * @var int User ID.\n-\t */\n-\tprotected $user_id;\n-\n-\t/**\n \t * Protected constructor.\n \t *\n \t * @since 4.0.0\n@@ -22,9 +13,17 @@\n \t *\n \t * @param int $user_id User whose session to manage.\n \t */\n-\tprotected function __construct( $user_id ) {\n-\t\t$this->user_id = $user_id;\n-\t}\n+\tprotected function __construct(\n+        /**\n+         * User ID.\n+         *\n+         * @since 4.0.0\n+         * @access protected\n+         */\n+        protected $user_id\n+    )\n+    {\n+    }\n \n \t/**\n \t * Get a session token manager instance for a user.\n@@ -60,7 +59,7 @@\n \t * @param string $token Session token to hash.\n \t * @return string A hash of the session token (a verifier).\n \t */\n-\tfinal private function hash_token( $token ) {\n+\tprivate function hash_token( $token ) {\n \t\treturn hash( 'sha256', $token );\n \t}\n \n@@ -123,7 +122,7 @@\n \t\t * @param array $session Array of extra data.\n \t\t * @param int   $user_id User ID.\n \t\t */\n-\t\t$session = apply_filters( 'attach_session_information', array(), $this->user_id );\n+\t\t$session = apply_filters( 'attach_session_information', [], $this->user_id );\n \t\t$session['expiration'] = $expiration;\n \n \t\t$token = wp_generate_password( 43, false, false );\n@@ -212,7 +211,7 @@\n \t */\n \tfinal public static function destroy_all_for_all_users() {\n \t\t$manager = apply_filters( 'session_token_manager', 'WP_User_Meta_Session_Tokens' );\n-\t\tcall_user_func( array( $manager, 'drop_sessions' ) );\n+\t\tcall_user_func( [ $manager, 'drop_sessions' ] );\n \t}\n \n \t/**\n@@ -308,11 +307,11 @@\n \t\t$sessions = get_user_meta( $this->user_id, 'session_tokens', true );\n \n \t\tif ( ! is_array( $sessions ) ) {\n-\t\t\treturn array();\n+\t\t\treturn [];\n \t\t}\n \n-\t\t$sessions = array_map( array( $this, 'prepare_session' ), $sessions );\n-\t\treturn array_filter( $sessions, array( $this, 'is_still_valid' ) );\n+\t\t$sessions = array_map( [ $this, 'prepare_session' ], $sessions );\n+\t\treturn array_filter( $sessions, [ $this, 'is_still_valid' ] );\n \t}\n \n \t/**\n@@ -323,7 +322,7 @@\n \t */\n \tprotected function prepare_session( $session ) {\n \t\tif ( is_int( $session ) ) {\n-\t\t\treturn array( 'expiration' => $session );\n+\t\t\treturn [ 'expiration' => $session ];\n \t\t}\n \n \t\treturn $session;\n@@ -341,11 +340,7 @@\n \tprotected function get_session( $verifier ) {\n \t\t$sessions = $this->get_sessions();\n \n-\t\tif ( isset( $sessions[ $verifier ] ) ) {\n-\t\t\treturn $sessions[ $verifier ];\n-\t\t}\n-\n-\t\treturn null;\n+\t\treturn $sessions[ $verifier ] ?? null;\n \t}\n \n \t/**\n@@ -399,7 +394,7 @@\n \t */\n \tprotected function destroy_other_sessions( $verifier ) {\n \t\t$session = $this->get_session( $verifier );\n-\t\t$this->update_sessions( array( $verifier => $session ) );\n+\t\t$this->update_sessions( [ $verifier => $session ] );\n \t}\n \n \t/**\n@@ -409,7 +404,7 @@\n \t * @access protected\n \t */\n \tprotected function destroy_all_sessions() {\n-\t\t$this->update_sessions( array() );\n+\t\t$this->update_sessions( [] );\n \t}\n \n \t/**\n",
        "applied_rectors": [
          "Rector\\Php54\\Rector\\Array_\\LongArrayToShortArrayRector",
          "Rector\\Php70\\Rector\\StmtsAwareInterface\\IfIssetToCoalescingRector",
          "Rector\\Php80\\Rector\\ClassMethod\\FinalPrivateToPrivateVisibilityRector",
          "Rector\\Php80\\Rector\\Class_\\ClassPropertyAssignToConstructorPromotionRector"
        ]
      }
    ],
    "changed_files": [
      "selected_100_files/medium_201_500/058_session.php"
    ]
  }
}