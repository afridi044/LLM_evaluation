{
  "file_path": "selected_100_files\\medium_201_500\\071_plugins.php",
  "rector_analysis": {
    "php_version_changes": 4,
    "rules_triggered": [
      "Rector\\Php53\\Rector\\FuncCall\\DirNameFileConstantToDirConstantRector",
      "Rector\\Php54\\Rector\\Array_\\LongArrayToShortArrayRector",
      "Rector\\Php70\\Rector\\Ternary\\TernaryToNullCoalescingRector",
      "Rector\\Php81\\Rector\\FuncCall\\NullToStrictStringFuncCallArgRector"
    ],
    "changes_by_php_version": {
      "php_53": 1,
      "php_54": 1,
      "php_70": 1,
      "php_81": 1
    },
    "has_diff": true,
    "diff_line_count": 169
  },
  "analysis_metadata": {
    "rector_version": "2.1.0",
    "analysis_date": "2025-08-31T05:21:34.254106",
    "file_size_kb": 19.3,
    "analysis_type": "version_specific_only"
  },
  "raw_rector_output": {
    "totals": {
      "changed_files": 1,
      "errors": 0
    },
    "file_diffs": [
      {
        "file": "selected_100_files/medium_201_500/071_plugins.php",
        "diff": "--- Original\n+++ New\n@@ -7,7 +7,7 @@\n  */\n \n /** WordPress Administration Bootstrap */\n-require_once( dirname( __FILE__ ) . '/admin.php' );\n+require_once( __DIR__ . '/admin.php' );\n \n if ( ! current_user_can('activate_plugins') )\n \twp_die( __( 'You do not have sufficient permissions to manage plugins for this site.' ) );\n@@ -17,11 +17,11 @@\n \n $action = $wp_list_table->current_action();\n \n-$plugin = isset($_REQUEST['plugin']) ? $_REQUEST['plugin'] : '';\n-$s = isset($_REQUEST['s']) ? urlencode($_REQUEST['s']) : '';\n+$plugin = $_REQUEST['plugin'] ?? '';\n+$s = isset($_REQUEST['s']) ? urlencode((string) $_REQUEST['s']) : '';\n \n // Clean up request URI from temporary args for screen options/paging uri's to work as expected.\n-$_SERVER['REQUEST_URI'] = remove_query_arg(array('error', 'deleted', 'activate', 'activate-multi', 'deactivate', 'deactivate-multi', '_error_nonce'), $_SERVER['REQUEST_URI']);\n+$_SERVER['REQUEST_URI'] = remove_query_arg(['error', 'deleted', 'activate', 'activate-multi', 'deactivate', 'deactivate-multi', '_error_nonce'], $_SERVER['REQUEST_URI']);\n \n if ( $action ) {\n \n@@ -40,7 +40,7 @@\n \t\t\t$result = activate_plugin($plugin, self_admin_url('plugins.php?error=true&plugin=' . $plugin), is_network_admin() );\n \t\t\tif ( is_wp_error( $result ) ) {\n \t\t\t\tif ( 'unexpected_output' == $result->get_error_code() ) {\n-\t\t\t\t\t$redirect = self_admin_url('plugins.php?error=true&charsout=' . strlen($result->get_error_data()) . '&plugin=' . $plugin . \"&plugin_status=$status&paged=$page&s=$s\");\n+\t\t\t\t\t$redirect = self_admin_url('plugins.php?error=true&charsout=' . strlen((string) $result->get_error_data()) . '&plugin=' . $plugin . \"&plugin_status=$status&paged=$page&s=$s\");\n \t\t\t\t\twp_redirect(add_query_arg('_error_nonce', wp_create_nonce('plugin-activation-error_' . $plugin), $redirect));\n \t\t\t\t\texit;\n \t\t\t\t} else {\n@@ -55,7 +55,7 @@\n \t\t\t}\n \n \t\t\tif ( isset($_GET['from']) && 'import' == $_GET['from'] ) {\n-\t\t\t\twp_redirect( self_admin_url(\"import.php?import=\" . str_replace('-importer', '', dirname($plugin))) ); // overrides the ?error=true one above and redirects to the Imports page, stripping the -importer suffix\n+\t\t\t\twp_redirect( self_admin_url(\"import.php?import=\" . str_replace('-importer', '', dirname((string) $plugin))) ); // overrides the ?error=true one above and redirects to the Imports page, stripping the -importer suffix\n \t\t\t} else {\n \t\t\t\twp_redirect( self_admin_url(\"plugins.php?activate=true&plugin_status=$status&paged=$page&s=$s\") ); // overrides the ?error=true one above\n \t\t\t}\n@@ -67,7 +67,7 @@\n \n \t\t\tcheck_admin_referer('bulk-plugins');\n \n-\t\t\t$plugins = isset( $_POST['checked'] ) ? (array) $_POST['checked'] : array();\n+\t\t\t$plugins = isset( $_POST['checked'] ) ? (array) $_POST['checked'] : [];\n \n \t\t\tif ( is_network_admin() ) {\n \t\t\t\tforeach ( $plugins as $i => $plugin ) {\n@@ -107,11 +107,11 @@\n \t\t\tcheck_admin_referer( 'bulk-plugins' );\n \n \t\t\tif ( isset( $_GET['plugins'] ) )\n-\t\t\t\t$plugins = explode( ',', $_GET['plugins'] );\n+\t\t\t\t$plugins = explode( ',', (string) $_GET['plugins'] );\n \t\t\telseif ( isset( $_POST['checked'] ) )\n \t\t\t\t$plugins = (array) $_POST['checked'];\n \t\t\telse\n-\t\t\t\t$plugins = array();\n+\t\t\t\t$plugins = [];\n \n \t\t\t$title = __( 'Update Plugins' );\n \t\t\t$parent_file = 'plugins.php';\n@@ -168,7 +168,7 @@\n \n \t\t\tdeactivate_plugins( $plugin, false, is_network_admin() );\n \t\t\tif ( ! is_network_admin() )\n-\t\t\t\tupdate_option( 'recently_activated', array( $plugin => time() ) + (array) get_option( 'recently_activated' ) );\n+\t\t\t\tupdate_option( 'recently_activated', [ $plugin => time() ] + (array) get_option( 'recently_activated' ) );\n \t\t\tif ( headers_sent() )\n \t\t\t\techo \"<meta http-equiv='refresh' content='\" . esc_attr( \"0;url=plugins.php?deactivate=true&plugin_status=$status&paged=$page&s=$s\" ) . \"' />\";\n \t\t\telse\n@@ -181,7 +181,7 @@\n \n \t\t\tcheck_admin_referer('bulk-plugins');\n \n-\t\t\t$plugins = isset( $_POST['checked'] ) ? (array) $_POST['checked'] : array();\n+\t\t\t$plugins = isset( $_POST['checked'] ) ? (array) $_POST['checked'] : [];\n \t\t\t// Do not deactivate plugins which are already deactivated.\n \t\t\tif ( is_network_admin() ) {\n \t\t\t\t$plugins = array_filter( $plugins, 'is_plugin_active_for_network' );\n@@ -197,7 +197,7 @@\n \t\t\tdeactivate_plugins( $plugins, false, is_network_admin() );\n \n \t\t\tif ( ! is_network_admin() ) {\n-\t\t\t\t$deactivated = array();\n+\t\t\t\t$deactivated = [];\n \t\t\t\tforeach ( $plugins as $plugin )\n \t\t\t\t\t$deactivated[ $plugin ] = time();\n \t\t\t\tupdate_option( 'recently_activated', $deactivated + (array) get_option( 'recently_activated' ) );\n@@ -213,7 +213,7 @@\n \t\t\tcheck_admin_referer('bulk-plugins');\n \n \t\t\t//$_POST = from the plugin form; $_GET = from the FTP details screen.\n-\t\t\t$plugins = isset( $_REQUEST['checked'] ) ? (array) $_REQUEST['checked'] : array();\n+\t\t\t$plugins = isset( $_REQUEST['checked'] ) ? (array) $_REQUEST['checked'] : [];\n \t\t\tif ( empty( $plugins ) ) {\n \t\t\t\twp_redirect( self_admin_url(\"plugins.php?plugin_status=$status&paged=$page&s=$s\") );\n \t\t\t\texit;\n@@ -235,10 +235,10 @@\n \t\t\t\t?>\n \t\t\t<div class=\"wrap\">\n \t\t\t\t<?php\n-\t\t\t\t\t$files_to_delete = $plugin_info = array();\n+\t\t\t\t\t$files_to_delete = $plugin_info = [];\n \t\t\t\t\t$have_non_network_plugins = false;\n \t\t\t\t\tforeach ( (array) $plugins as $plugin ) {\n-\t\t\t\t\t\tif ( '.' == dirname($plugin) ) {\n+\t\t\t\t\t\tif ( '.' == dirname((string) $plugin) ) {\n \t\t\t\t\t\t\t$files_to_delete[] = WP_PLUGIN_DIR . '/' . $plugin;\n \t\t\t\t\t\t\tif( $data = get_plugin_data(WP_PLUGIN_DIR . '/' . $plugin) ) {\n \t\t\t\t\t\t\t\t$plugin_info[ $plugin ] = $data;\n@@ -248,12 +248,12 @@\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t} else {\n \t\t\t\t\t\t\t// Locate all the files in that folder\n-\t\t\t\t\t\t\t$files = list_files( WP_PLUGIN_DIR . '/' . dirname($plugin) );\n+\t\t\t\t\t\t\t$files = list_files( WP_PLUGIN_DIR . '/' . dirname((string) $plugin) );\n \t\t\t\t\t\t\tif ( $files ) {\n \t\t\t\t\t\t\t\t$files_to_delete = array_merge($files_to_delete, $files);\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t// Get plugins list from that folder\n-\t\t\t\t\t\t\tif ( $folder_plugins = get_plugins( '/' . dirname($plugin)) ) {\n+\t\t\t\t\t\t\tif ( $folder_plugins = get_plugins( '/' . dirname((string) $plugin)) ) {\n \t\t\t\t\t\t\t\tforeach( $folder_plugins as $plugin_file => $data ) {\n \t\t\t\t\t\t\t\t\t$plugin_info[ $plugin_file ] = _get_plugin_data_markup_translate( $plugin_file, $data );\n \t\t\t\t\t\t\t\t\t$plugin_info[ $plugin_file ]['is_uninstallable'] = is_uninstallable_plugin( $plugin );\n@@ -327,7 +327,7 @@\n \n \t\tcase 'clear-recent-list':\n \t\t\tif ( ! is_network_admin() )\n-\t\t\t\tupdate_option( 'recently_activated', array() );\n+\t\t\t\tupdate_option( 'recently_activated', [] );\n \t\t\tbreak;\n \t}\n }\n@@ -337,22 +337,22 @@\n wp_enqueue_script('plugin-install');\n add_thickbox();\n \n-add_screen_option( 'per_page', array('label' => _x( 'Plugins', 'plugins per page (screen options)' ), 'default' => 999 ) );\n+add_screen_option( 'per_page', ['label' => _x( 'Plugins', 'plugins per page (screen options)' ), 'default' => 999 ] );\n \n-get_current_screen()->add_help_tab( array(\n+get_current_screen()->add_help_tab( [\n 'id'\t\t=> 'overview',\n 'title'\t\t=> __('Overview'),\n 'content'\t=>\n \t'<p>' . __('Plugins extend and expand the functionality of WordPress. Once a plugin is installed, you may activate it or deactivate it here.') . '</p>' .\n \t'<p>' . sprintf(__('You can find additional plugins for your site by using the <a href=\"%1$s\">Plugin Browser/Installer</a> functionality or by browsing the <a href=\"%2$s\" target=\"_blank\">WordPress Plugin Directory</a> directly and installing new plugins manually. To manually install a plugin you generally just need to upload the plugin file into your <code>/wp-content/plugins</code> directory. Once a plugin has been installed, you can activate it here.'), 'plugin-install.php', 'https://wordpress.org/plugins/') . '</p>'\n-) );\n-get_current_screen()->add_help_tab( array(\n+] );\n+get_current_screen()->add_help_tab( [\n 'id'\t\t=> 'compatibility-problems',\n 'title'\t\t=> __('Troubleshooting'),\n 'content'\t=>\n \t'<p>' . __('Most of the time, plugins play nicely with the core of WordPress and with other plugins. Sometimes, though, a plugin&#8217;s code will get in the way of another plugin, causing compatibility issues. If your site starts doing strange things, this may be the problem. Try deactivating all your plugins and re-activating them in various combinations until you isolate which one(s) caused the issue.') . '</p>' .\n \t'<p>' . sprintf( __('If something goes wrong with a plugin and you can&#8217;t use WordPress, delete or rename that file in the <code>%s</code> directory and it will be automatically deactivated.'), WP_PLUGIN_DIR) . '</p>'\n-) );\n+] );\n \n get_current_screen()->set_help_sidebar(\n \t'<p><strong>' . __('For more information:') . '</strong></p>' .\n",
        "applied_rectors": [
          "Rector\\Php53\\Rector\\FuncCall\\DirNameFileConstantToDirConstantRector",
          "Rector\\Php54\\Rector\\Array_\\LongArrayToShortArrayRector",
          "Rector\\Php70\\Rector\\Ternary\\TernaryToNullCoalescingRector",
          "Rector\\Php81\\Rector\\FuncCall\\NullToStrictStringFuncCallArgRector"
        ]
      }
    ],
    "changed_files": [
      "selected_100_files/medium_201_500/071_plugins.php"
    ]
  }
}