{
  "file_path": "selected_100_files\\large_500_1000\\017_press-this.php",
  "rector_analysis": {
    "php_version_changes": 7,
    "rules_triggered": [
      "Rector\\Php53\\Rector\\FuncCall\\DirNameFileConstantToDirConstantRector",
      "Rector\\Php54\\Rector\\Array_\\LongArrayToShortArrayRector",
      "Rector\\Php70\\Rector\\Ternary\\TernaryToNullCoalescingRector",
      "Rector\\Php71\\Rector\\List_\\ListToArrayDestructRector",
      "Rector\\Php80\\Rector\\Identical\\StrStartsWithRector",
      "Rector\\Php80\\Rector\\NotIdentical\\StrContainsRector",
      "Rector\\Php81\\Rector\\FuncCall\\NullToStrictStringFuncCallArgRector"
    ],
    "changes_by_php_version": {
      "php_53": 1,
      "php_54": 1,
      "php_70": 1,
      "php_71": 1,
      "php_80": 2,
      "php_81": 1
    },
    "has_diff": true,
    "diff_line_count": 147
  },
  "analysis_metadata": {
    "rector_version": "2.1.0",
    "analysis_date": "2025-08-31T05:18:46.895456",
    "file_size_kb": 26.1,
    "analysis_type": "version_specific_only"
  },
  "raw_rector_output": {
    "totals": {
      "changed_files": 1,
      "errors": 0
    },
    "file_diffs": [
      {
        "file": "selected_100_files/large_500_1000/017_press-this.php",
        "diff": "--- Original\n+++ New\n@@ -9,7 +9,7 @@\n define('IFRAME_REQUEST' , true);\n \n /** WordPress Administration Bootstrap */\n-require_once( dirname( __FILE__ ) . '/admin.php' );\n+require_once( __DIR__ . '/admin.php' );\n \n header('Content-Type: ' . get_option('html_type') . '; charset=' . get_option('blog_charset'));\n \n@@ -32,22 +32,22 @@\n \tif ( !current_user_can('edit_post', $post_ID) )\n \t\twp_die(__('You are not allowed to edit this post.'));\n \n-\t$post['post_category'] = isset($_POST['post_category']) ? $_POST['post_category'] : '';\n-\t$post['tax_input'] = isset($_POST['tax_input']) ? $_POST['tax_input'] : '';\n-\t$post['post_title'] = isset($_POST['title']) ? $_POST['title'] : '';\n-\t$content = isset($_POST['content']) ? $_POST['content'] : '';\n+\t$post['post_category'] = $_POST['post_category'] ?? '';\n+\t$post['tax_input'] = $_POST['tax_input'] ?? '';\n+\t$post['post_title'] = $_POST['title'] ?? '';\n+\t$content = $_POST['content'] ?? '';\n \n \t$upload = false;\n \tif ( !empty($_POST['photo_src']) && current_user_can('upload_files') ) {\n \t\tforeach( (array) $_POST['photo_src'] as $key => $image) {\n \t\t\t// See if files exist in content - we don't want to upload non-used selected files.\n-\t\t\tif ( strpos($_POST['content'], htmlspecialchars($image)) !== false ) {\n-\t\t\t\t$desc = isset($_POST['photo_description'][$key]) ? $_POST['photo_description'][$key] : '';\n+\t\t\tif ( str_contains((string) $_POST['content'], htmlspecialchars((string) $image)) ) {\n+\t\t\t\t$desc = $_POST['photo_description'][$key] ?? '';\n \t\t\t\t$upload = media_sideload_image($image, $post_ID, $desc);\n \n \t\t\t\t// Replace the POSTED content <img> with correct uploaded ones. Regex contains fix for Magic Quotes\n \t\t\t\tif ( !is_wp_error($upload) )\n-\t\t\t\t\t$content = preg_replace('/<img ([^>]*)src=\\\\\\?(\\\"|\\')'.preg_quote(htmlspecialchars($image), '/').'\\\\\\?(\\2)([^>\\/]*)\\/*>/is', $upload, $content);\n+\t\t\t\t\t$content = preg_replace('/<img ([^>]*)src=\\\\\\?(\\\"|\\')'.preg_quote(htmlspecialchars((string) $image), '/').'\\\\\\?(\\2)([^>\\/]*)\\/*>/is', $upload, (string) $content);\n \t\t\t}\n \t\t}\n \t}\n@@ -103,7 +103,7 @@\n }\n \n $url = isset($_GET['u']) ? esc_url($_GET['u']) : '';\n-$image = isset($_GET['i']) ? $_GET['i'] : '';\n+$image = $_GET['i'] ?? '';\n \n if ( !empty($_REQUEST['ajax']) ) {\n \tswitch ($_REQUEST['ajax']) {\n@@ -168,24 +168,24 @@\n \t\t */\n \t\tfunction get_images_from_uri($uri) {\n \t\t\t$uri = preg_replace('/\\/#.+?$/','', $uri);\n-\t\t\tif ( preg_match( '/\\.(jpe?g|jpe|gif|png)\\b/i', $uri ) && !strpos( $uri, 'blogger.com' ) )\n-\t\t\t\treturn \"'\" . esc_attr( html_entity_decode($uri) ) . \"'\";\n+\t\t\tif ( preg_match( '/\\.(jpe?g|jpe|gif|png)\\b/i', (string) $uri ) && !strpos( (string) $uri, 'blogger.com' ) )\n+\t\t\t\treturn \"'\" . esc_attr( html_entity_decode((string) $uri) ) . \"'\";\n \t\t\t$content = wp_remote_fopen($uri);\n \t\t\tif ( false === $content )\n \t\t\t\treturn '';\n-\t\t\t$host = parse_url($uri);\n+\t\t\t$host = parse_url((string) $uri);\n \t\t\t$pattern = '/<img ([^>]*)src=(\\\"|\\')([^<>\\'\\\"]+)(\\2)([^>]*)\\/*>/i';\n-\t\t\t$content = str_replace(array(\"\\n\",\"\\t\",\"\\r\"), '', $content);\n+\t\t\t$content = str_replace([\"\\n\",\"\\t\",\"\\r\"], '', $content);\n \t\t\tpreg_match_all($pattern, $content, $matches);\n \t\t\tif ( empty($matches[0]) )\n \t\t\t\treturn '';\n-\t\t\t$sources = array();\n+\t\t\t$sources = [];\n \t\t\tforeach ($matches[3] as $src) {\n \n \t\t\t\t// If no http in URL.\n-\t\t\t\tif (strpos($src, 'http') === false)\n+\t\t\t\tif (!str_contains($src, 'http'))\n \t\t\t\t\t// If it doesn't have a relative URI.\n-\t\t\t\t\tif ( strpos($src, '../') === false && strpos($src, './') === false && strpos($src, '/') === 0)\n+\t\t\t\t\tif ( !str_contains($src, '../') && !str_contains($src, './') && str_starts_with($src, '/'))\n \t\t\t\t\t\t$src = 'http://'.str_replace('//','/', $host['host'].'/'.$src);\n \t\t\t\t\telse\n \t\t\t\t\t\t$src = 'http://'.str_replace('//','/', $host['host'].'/'.dirname($host['path']).'/'.$src);\n@@ -377,12 +377,12 @@\n \t\t\t\t\t<?php\n \t\t\t\t\t$content = '';\n \t\t\t\t\tif ( preg_match(\"/youtube\\.com\\/watch/i\", $url) ) {\n-\t\t\t\t\t\tlist($domain, $video_id) = explode(\"v=\", $url);\n+\t\t\t\t\t\t[$domain, $video_id] = explode(\"v=\", $url);\n \t\t\t\t\t\t$video_id = esc_attr($video_id);\n \t\t\t\t\t\t$content = '<object width=\"425\" height=\"350\"><param name=\"movie\" value=\"http://www.youtube.com/v/' . $video_id . '\"></param><param name=\"wmode\" value=\"transparent\"></param><embed src=\"http://www.youtube.com/v/' . $video_id . '\" type=\"application/x-shockwave-flash\" wmode=\"transparent\" width=\"425\" height=\"350\"></embed></object>';\n \n \t\t\t\t\t} elseif ( preg_match(\"/vimeo\\.com\\/[0-9]+/i\", $url) ) {\n-\t\t\t\t\t\tlist($domain, $video_id) = explode(\".com/\", $url);\n+\t\t\t\t\t\t[$domain, $video_id] = explode(\".com/\", $url);\n \t\t\t\t\t\t$video_id = esc_attr($video_id);\n \t\t\t\t\t\t$content = '<object width=\"400\" height=\"225\"><param name=\"allowfullscreen\" value=\"true\" /><param name=\"allowscriptaccess\" value=\"always\" /><param name=\"movie\" value=\"http://www.vimeo.com/moogaloop.swf?clip_id=' . $video_id . '&amp;server=www.vimeo.com&amp;show_title=1&amp;show_byline=1&amp;show_portrait=0&amp;color=&amp;fullscreen=1\" />\t<embed src=\"http://www.vimeo.com/moogaloop.swf?clip_id=' . $video_id . '&amp;server=www.vimeo.com&amp;show_title=1&amp;show_byline=1&amp;show_portrait=0&amp;color=&amp;fullscreen=1\" type=\"application/x-shockwave-flash\" allowfullscreen=\"true\" allowscriptaccess=\"always\" width=\"400\" height=\"225\"></embed></object>';\n \n@@ -389,7 +389,7 @@\n \t\t\t\t\t\tif ( trim($selection) == '' )\n \t\t\t\t\t\t\t$selection = '<p><a href=\"http://www.vimeo.com/' . $video_id . '?pg=embed&sec=' . $video_id . '\">' . $title . '</a> on <a href=\"http://vimeo.com?pg=embed&sec=' . $video_id . '\">Vimeo</a></p>';\n \n-\t\t\t\t\t} elseif ( strpos( $selection, '<object' ) !== false ) {\n+\t\t\t\t\t} elseif ( str_contains( $selection, '<object' ) ) {\n \t\t\t\t\t\t$content = $selection;\n \t\t\t\t\t}\n \t\t\t\t\t?>\n@@ -496,7 +496,7 @@\n \t\t\t\t<div class=\"inside\">\n \t\t\t\t\t<p id=\"publishing-actions\">\n \t\t\t\t\t<?php\n-\t\t\t\t\t\tsubmit_button( __( 'Save Draft' ), 'button', 'draft', false, array( 'id' => 'save' ) );\n+\t\t\t\t\t\tsubmit_button( __( 'Save Draft' ), 'button', 'draft', false, [ 'id' => 'save' ] );\n \t\t\t\t\t\tif ( current_user_can('publish_posts') ) {\n \t\t\t\t\t\t\tsubmit_button( __( 'Publish' ), 'primary', 'publish', false );\n \t\t\t\t\t\t} else {\n@@ -543,7 +543,7 @@\n \n \t\t\t\t\t<div id=\"category-all\" class=\"tabs-panel\">\n \t\t\t\t\t\t<ul id=\"categorychecklist\" data-wp-lists=\"list:category\" class=\"categorychecklist form-no-clear\">\n-\t\t\t\t\t\t\t<?php wp_terms_checklist($post_ID, array( 'taxonomy' => 'category', 'popular_cats' => $popular_ids ) ) ?>\n+\t\t\t\t\t\t\t<?php wp_terms_checklist($post_ID, [ 'taxonomy' => 'category', 'popular_cats' => $popular_ids ] ) ?>\n \t\t\t\t\t\t</ul>\n \t\t\t\t\t</div>\n \n@@ -563,7 +563,7 @@\n \t\t\t\t\t\t\t\t<label class=\"screen-reader-text\" for=\"newcategory_parent\">\n \t\t\t\t\t\t\t\t\t<?php echo $tax->labels->parent_item_colon; ?>\n \t\t\t\t\t\t\t\t</label>\n-\t\t\t\t\t\t\t\t<?php wp_dropdown_categories( array( 'taxonomy' => 'category', 'hide_empty' => 0, 'name' => 'newcategory_parent', 'orderby' => 'name', 'hierarchical' => 1, 'show_option_none' => '&mdash; ' . $tax->labels->parent_item . ' &mdash;' ) ); ?>\n+\t\t\t\t\t\t\t\t<?php wp_dropdown_categories( [ 'taxonomy' => 'category', 'hide_empty' => 0, 'name' => 'newcategory_parent', 'orderby' => 'name', 'hierarchical' => 1, 'show_option_none' => '&mdash; ' . $tax->labels->parent_item . ' &mdash;' ] ); ?>\n \t\t\t\t\t\t\t\t<input type=\"button\" id=\"category-add-submit\" data-wp-lists=\"add:categorychecklist:category-add\" class=\"button category-add-submit\" value=\"<?php echo esc_attr( $tax->labels->add_new_item ); ?>\" />\n \t\t\t\t\t\t\t\t<?php wp_nonce_field( 'add-category', '_ajax_nonce-add-category', false ); ?>\n \t\t\t\t\t\t\t\t<span id=\"category-ajax-response\"></span>\n@@ -628,10 +628,10 @@\n \t\t<div class=\"postdivrich\">\n \t\t<?php\n \n-\t\t$editor_settings = array(\n+\t\t$editor_settings = [\n \t\t\t'teeny' => true,\n \t\t\t'textarea_rows' => '15'\n-\t\t);\n+\t\t];\n \n \t\t$content = '';\n \t\tif ( $selection )\n",
        "applied_rectors": [
          "Rector\\Php53\\Rector\\FuncCall\\DirNameFileConstantToDirConstantRector",
          "Rector\\Php54\\Rector\\Array_\\LongArrayToShortArrayRector",
          "Rector\\Php70\\Rector\\Ternary\\TernaryToNullCoalescingRector",
          "Rector\\Php71\\Rector\\List_\\ListToArrayDestructRector",
          "Rector\\Php80\\Rector\\Identical\\StrStartsWithRector",
          "Rector\\Php80\\Rector\\NotIdentical\\StrContainsRector",
          "Rector\\Php81\\Rector\\FuncCall\\NullToStrictStringFuncCallArgRector"
        ]
      }
    ],
    "changed_files": [
      "selected_100_files/large_500_1000/017_press-this.php"
    ]
  }
}