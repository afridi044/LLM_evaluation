{
  "file_path": "selected_100_files\\large_500_1000\\064_wp-diff.php",
  "rector_analysis": {
    "php_version_changes": 5,
    "rules_triggered": [
      "Rector\\Php53\\Rector\\FuncCall\\DirNameFileConstantToDirConstantRector",
      "Rector\\Php54\\Rector\\Array_\\LongArrayToShortArrayRector",
      "Rector\\Php71\\Rector\\List_\\ListToArrayDestructRector",
      "Rector\\Php81\\Rector\\Array_\\FirstClassCallableRector",
      "Rector\\Php81\\Rector\\FuncCall\\NullToStrictStringFuncCallArgRector"
    ],
    "changes_by_php_version": {
      "php_53": 1,
      "php_54": 1,
      "php_71": 1,
      "php_81": 2
    },
    "has_diff": true,
    "diff_line_count": 138
  },
  "analysis_metadata": {
    "rector_version": "2.1.0",
    "analysis_date": "2025-08-31T05:21:13.373308",
    "file_size_kb": 13.8,
    "analysis_type": "version_specific_only"
  },
  "raw_rector_output": {
    "totals": {
      "changed_files": 1,
      "errors": 0
    },
    "file_diffs": [
      {
        "file": "selected_100_files/large_500_1000/064_wp-diff.php",
        "diff": "--- Original\n+++ New\n@@ -10,11 +10,11 @@\n \n if ( !class_exists( 'Text_Diff' ) ) {\n \t/** Text_Diff class */\n-\trequire( dirname(__FILE__).'/Text/Diff.php' );\n+\trequire( __DIR__.'/Text/Diff.php' );\n \t/** Text_Diff_Renderer class */\n-\trequire( dirname(__FILE__).'/Text/Diff/Renderer.php' );\n+\trequire( __DIR__.'/Text/Diff/Renderer.php' );\n \t/** Text_Diff_Renderer_inline class */\n-\trequire( dirname(__FILE__).'/Text/Diff/Renderer/inline.php' );\n+\trequire( __DIR__.'/Text/Diff/Renderer/inline.php' );\n }\n \n /**\n@@ -77,7 +77,7 @@\n \t *\n \t * @param array $params\n \t */\n-\tpublic function __construct( $params = array() ) {\n+\tpublic function __construct( $params = [] ) {\n \t\tparent::__construct( $params );\n \t\tif ( isset( $params[ 'show_split_view' ] ) )\n \t\t\t$this->_show_split_view = $params[ 'show_split_view' ];\n@@ -154,7 +154,7 @@\n \t\t$r = '';\n \t\tforeach ($lines as $line) {\n \t\t\tif ( $encode )\n-\t\t\t\t$line = htmlspecialchars( $line );\n+\t\t\t\t$line = htmlspecialchars( (string) $line );\n \t\t\tif ( $this->_show_split_view ) {\n \t\t\t\t$r .= '<tr>' . $this->emptyLine() . $this->emptyLine() . $this->addedLine( $line ) . \"</tr>\\n\";\n \t\t\t} else {\n@@ -176,7 +176,7 @@\n \t\t$r = '';\n \t\tforeach ($lines as $line) {\n \t\t\tif ( $encode )\n-\t\t\t\t$line = htmlspecialchars( $line );\n+\t\t\t\t$line = htmlspecialchars( (string) $line );\n \t\t\tif ( $this->_show_split_view ) {\n \t\t\t\t$r .= '<tr>' . $this->deletedLine( $line ) . $this->emptyLine() . $this->emptyLine() . \"</tr>\\n\";\n \t\t\t} else {\n@@ -199,7 +199,7 @@\n \t\t$r = '';\n \t\tforeach ($lines as $line) {\n \t\t\tif ( $encode )\n-\t\t\t\t$line = htmlspecialchars( $line );\n+\t\t\t\t$line = htmlspecialchars( (string) $line );\n \t\t\tif (  $this->_show_split_view ) {\n \t\t\t\t$r .= '<tr>' . $this->contextLine( $line ) . $this->emptyLine() . $this->contextLine( $line )  . \"</tr>\\n\";\n \t\t\t} else {\n@@ -232,16 +232,16 @@\n \t\t// *_rows are column vectors for the orig column and the final column.\n \t\t//\trow >= 0: an indix of the $orig or $final array\n \t\t//\trow  < 0: a blank row for that column\n-\t\tlist($orig_matches, $final_matches, $orig_rows, $final_rows) = $this->interleave_changed_lines( $orig, $final );\n+\t\t[$orig_matches, $final_matches, $orig_rows, $final_rows] = $this->interleave_changed_lines( $orig, $final );\n \n \t\t// These will hold the word changes as determined by an inline diff\n-\t\t$orig_diffs  = array();\n-\t\t$final_diffs = array();\n+\t\t$orig_diffs  = [];\n+\t\t$final_diffs = [];\n \n \t\t// Compute word diffs for each matched pair using the inline diff\n \t\tforeach ( $orig_matches as $o => $f ) {\n \t\t\tif ( is_numeric($o) && is_numeric($f) ) {\n-\t\t\t\t$text_diff = new Text_Diff( 'auto', array( array($orig[$o]), array($final[$f]) ) );\n+\t\t\t\t$text_diff = new Text_Diff( 'auto', [ [$orig[$o]], [$final[$f]] ] );\n \t\t\t\t$renderer = new $this->inline_diff_renderer;\n \t\t\t\t$diff = $renderer->render( $text_diff );\n \n@@ -284,9 +284,9 @@\n \t\t\t\t$final_line = '';\n \n \t\t\tif ( $orig_rows[$row] < 0 ) { // Orig is blank. This is really an added row.\n-\t\t\t\t$r .= $this->_added( array($final_line), false );\n+\t\t\t\t$r .= $this->_added( [$final_line], false );\n \t\t\t} elseif ( $final_rows[$row] < 0 ) { // Final is blank. This is really a deleted row.\n-\t\t\t\t$r .= $this->_deleted( array($orig_line), false );\n+\t\t\t\t$r .= $this->_deleted( [$orig_line], false );\n \t\t\t} else { // A true changed row.\n \t\t\t\tif ( $this->_show_split_view ) {\n \t\t\t\t\t$r .= '<tr>' . $this->deletedLine( $orig_line ) . $this->emptyLine() . $this->addedLine( $final_line ) . \"</tr>\\n\";\n@@ -316,7 +316,7 @@\n \tpublic function interleave_changed_lines( $orig, $final ) {\n \n \t\t// Contains all pairwise string comparisons. Keys are such that this need only be a one dimensional array.\n-\t\t$matches = array();\n+\t\t$matches = [];\n \t\tforeach ( array_keys($orig) as $o ) {\n \t\t\tforeach ( array_keys($final) as $f ) {\n \t\t\t\t$matches[\"$o,$f\"] = $this->compute_string_distance( $orig[$o], $final[$f] );\n@@ -324,11 +324,11 @@\n \t\t}\n \t\tasort($matches); // Order by string distance.\n \n-\t\t$orig_matches  = array();\n-\t\t$final_matches = array();\n+\t\t$orig_matches  = [];\n+\t\t$final_matches = [];\n \n \t\tforeach ( $matches as $keys => $difference ) {\n-\t\t\tlist($o, $f) = explode(',', $keys);\n+\t\t\t[$o, $f] = explode(',', $keys);\n \t\t\t$o = (int) $o;\n \t\t\t$f = (int) $f;\n \n@@ -390,7 +390,7 @@\n \t\t\t\tarray_push($final_rows, $diff_count++);\n \t\t}\n \n-\t\treturn array($orig_matches, $final_matches, $orig_rows, $final_rows);\n+\t\treturn [$orig_matches, $final_matches, $orig_rows, $final_rows];\n \t}\n \n \t/**\n@@ -408,7 +408,7 @@\n \t\t$chars2 = count_chars($string2);\n \n \t\t// L1-norm of difference vector.\n-\t\t$difference = array_sum( array_map( array($this, 'difference'), $chars1, $chars2 ) );\n+\t\t$difference = array_sum( array_map( $this->difference(...), $chars1, $chars2 ) );\n \n \t\t// $string1 has zero length? Odd. Give huge penalty by not dividing.\n \t\tif ( !$string1 )\n@@ -493,7 +493,7 @@\n \t * @return mixed|bool Return value of the callback, false otherwise.\n \t */\n \tpublic function __call( $name, $arguments ) {\n-\t\treturn call_user_func_array( array( $this, $name ), $arguments );\n+\t\treturn call_user_func_array( [ $this, $name ], $arguments );\n \t}\n }\n \n",
        "applied_rectors": [
          "Rector\\Php53\\Rector\\FuncCall\\DirNameFileConstantToDirConstantRector",
          "Rector\\Php54\\Rector\\Array_\\LongArrayToShortArrayRector",
          "Rector\\Php71\\Rector\\List_\\ListToArrayDestructRector",
          "Rector\\Php81\\Rector\\Array_\\FirstClassCallableRector",
          "Rector\\Php81\\Rector\\FuncCall\\NullToStrictStringFuncCallArgRector"
        ]
      }
    ],
    "changed_files": [
      "selected_100_files/large_500_1000/064_wp-diff.php"
    ]
  }
}