{
  "file_path": "selected_100_files\\medium_201_500\\041_module.tag.lyrics3.php",
  "rector_analysis": {
    "php_version_changes": 5,
    "rules_triggered": [
      "Rector\\Php54\\Rector\\Array_\\LongArrayToShortArrayRector",
      "Rector\\Php70\\Rector\\Ternary\\TernaryToNullCoalescingRector",
      "Rector\\Php80\\Rector\\Identical\\StrStartsWithRector",
      "Rector\\Php80\\Rector\\NotIdentical\\StrContainsRector",
      "Rector\\Php81\\Rector\\FuncCall\\NullToStrictStringFuncCallArgRector"
    ],
    "changes_by_php_version": {
      "php_54": 1,
      "php_70": 1,
      "php_80": 2,
      "php_81": 1
    },
    "has_diff": true,
    "diff_line_count": 69
  },
  "analysis_metadata": {
    "rector_version": "2.1.0",
    "analysis_date": "2025-08-31T05:20:02.234024",
    "file_size_kb": 10.8,
    "analysis_type": "version_specific_only"
  },
  "raw_rector_output": {
    "totals": {
      "changed_files": 1,
      "errors": 0
    },
    "file_diffs": [
      {
        "file": "selected_100_files/medium_201_500/041_module.tag.lyrics3.php",
        "diff": "--- Original\n+++ New\n@@ -143,8 +143,8 @@\n \t\t$ParsedLyrics3['tag_offset_start']      = $endoffset;\n \t\t$ParsedLyrics3['tag_offset_end']        = $endoffset + $length - 1;\n \n-\t\tif (substr($rawdata, 0, 11) != 'LYRICSBEGIN') {\n-\t\t\tif (strpos($rawdata, 'LYRICSBEGIN') !== false) {\n+\t\tif (!str_starts_with($rawdata, 'LYRICSBEGIN')) {\n+\t\t\tif (str_contains($rawdata, 'LYRICSBEGIN')) {\n \n \t\t\t\t$info['warning'][] = '\"LYRICSBEGIN\" expected at '.$endoffset.' but actually found at '.($endoffset + strpos($rawdata, 'LYRICSBEGIN')).' - this is invalid for Lyrics3 v'.$version;\n \t\t\t\t$info['avdataend'] = $endoffset + strpos($rawdata, 'LYRICSBEGIN');\n@@ -187,7 +187,7 @@\n \n \t\t\t\t\tif (isset($ParsedLyrics3['raw']['IND'])) {\n \t\t\t\t\t\t$i = 0;\n-\t\t\t\t\t\t$flagnames = array('lyrics', 'timestamps', 'inhibitrandom');\n+\t\t\t\t\t\t$flagnames = ['lyrics', 'timestamps', 'inhibitrandom'];\n \t\t\t\t\t\tforeach ($flagnames as $flagname) {\n \t\t\t\t\t\t\tif (strlen($ParsedLyrics3['raw']['IND']) > $i++) {\n \t\t\t\t\t\t\t\t$ParsedLyrics3['flags'][$flagname] = $this->IntString2Bool(substr($ParsedLyrics3['raw']['IND'], $i, 1 - 1));\n@@ -195,7 +195,7 @@\n \t\t\t\t\t\t}\n \t\t\t\t\t}\n \n-\t\t\t\t\t$fieldnametranslation = array('ETT'=>'title', 'EAR'=>'artist', 'EAL'=>'album', 'INF'=>'comment', 'AUT'=>'author');\n+\t\t\t\t\t$fieldnametranslation = ['ETT'=>'title', 'EAR'=>'artist', 'EAL'=>'album', 'INF'=>'comment', 'AUT'=>'author'];\n \t\t\t\t\tforeach ($fieldnametranslation as $key => $value) {\n \t\t\t\t\t\tif (isset($ParsedLyrics3['raw'][$key])) {\n \t\t\t\t\t\t\t$ParsedLyrics3['comments'][$value][] = trim($ParsedLyrics3['raw'][$key]);\n@@ -205,11 +205,11 @@\n \t\t\t\t\tif (isset($ParsedLyrics3['raw']['IMG'])) {\n \t\t\t\t\t\t$imagestrings = explode(\"\\r\\n\", $ParsedLyrics3['raw']['IMG']);\n \t\t\t\t\t\tforeach ($imagestrings as $key => $imagestring) {\n-\t\t\t\t\t\t\tif (strpos($imagestring, '||') !== false) {\n+\t\t\t\t\t\t\tif (str_contains($imagestring, '||')) {\n \t\t\t\t\t\t\t\t$imagearray = explode('||', $imagestring);\n-\t\t\t\t\t\t\t\t$ParsedLyrics3['images'][$key]['filename']     =                                (isset($imagearray[0]) ? $imagearray[0] : '');\n-\t\t\t\t\t\t\t\t$ParsedLyrics3['images'][$key]['description']  =                                (isset($imagearray[1]) ? $imagearray[1] : '');\n-\t\t\t\t\t\t\t\t$ParsedLyrics3['images'][$key]['timestamp']    = $this->Lyrics3Timestamp2Seconds(isset($imagearray[2]) ? $imagearray[2] : '');\n+\t\t\t\t\t\t\t\t$ParsedLyrics3['images'][$key]['filename']     =                                ($imagearray[0] ?? '');\n+\t\t\t\t\t\t\t\t$ParsedLyrics3['images'][$key]['description']  =                                ($imagearray[1] ?? '');\n+\t\t\t\t\t\t\t\t$ParsedLyrics3['images'][$key]['timestamp']    = $this->Lyrics3Timestamp2Seconds($imagearray[2] ?? '');\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t}\n \t\t\t\t\t}\n@@ -247,7 +247,7 @@\n \t}\n \n \tpublic function Lyrics3Timestamp2Seconds($rawtimestamp) {\n-\t\tif (preg_match('#^\\\\[([0-9]{2}):([0-9]{2})\\\\]$#', $rawtimestamp, $regs)) {\n+\t\tif (preg_match('#^\\\\[([0-9]{2}):([0-9]{2})\\\\]$#', (string) $rawtimestamp, $regs)) {\n \t\t\treturn (int) (($regs[1] * 60) + $regs[2]);\n \t\t}\n \t\treturn false;\n@@ -254,9 +254,9 @@\n \t}\n \n \tpublic function Lyrics3LyricsTimestampParse(&$Lyrics3data) {\n-\t\t$lyricsarray = explode(\"\\r\\n\", $Lyrics3data['raw']['LYR']);\n+\t\t$lyricsarray = explode(\"\\r\\n\", (string) $Lyrics3data['raw']['LYR']);\n \t\tforeach ($lyricsarray as $key => $lyricline) {\n-\t\t\t$regs = array();\n+\t\t\t$regs = [];\n \t\t\tunset($thislinetimestamps);\n \t\t\twhile (preg_match('#^(\\\\[[0-9]{2}:[0-9]{2}\\\\])#', $lyricline, $regs)) {\n \t\t\t\t$thislinetimestamps[] = $this->Lyrics3Timestamp2Seconds($regs[0]);\n",
        "applied_rectors": [
          "Rector\\Php54\\Rector\\Array_\\LongArrayToShortArrayRector",
          "Rector\\Php70\\Rector\\Ternary\\TernaryToNullCoalescingRector",
          "Rector\\Php80\\Rector\\Identical\\StrStartsWithRector",
          "Rector\\Php80\\Rector\\NotIdentical\\StrContainsRector",
          "Rector\\Php81\\Rector\\FuncCall\\NullToStrictStringFuncCallArgRector"
        ]
      }
    ],
    "changed_files": [
      "selected_100_files/medium_201_500/041_module.tag.lyrics3.php"
    ]
  }
}