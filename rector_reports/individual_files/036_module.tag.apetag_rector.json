{
  "file_path": "selected_100_files\\medium_201_500\\036_module.tag.apetag.php",
  "rector_analysis": {
    "php_version_changes": 5,
    "rules_triggered": [
      "Rector\\Php54\\Rector\\Array_\\LongArrayToShortArrayRector",
      "Rector\\Php70\\Rector\\Ternary\\TernaryToNullCoalescingRector",
      "Rector\\Php71\\Rector\\List_\\ListToArrayDestructRector",
      "Rector\\Php80\\Rector\\NotIdentical\\StrContainsRector",
      "Rector\\Php81\\Rector\\FuncCall\\NullToStrictStringFuncCallArgRector"
    ],
    "changes_by_php_version": {
      "php_54": 1,
      "php_70": 1,
      "php_71": 1,
      "php_80": 1,
      "php_81": 1
    },
    "has_diff": true,
    "diff_line_count": 159
  },
  "analysis_metadata": {
    "rector_version": "2.1.0",
    "analysis_date": "2025-08-31T05:19:45.812026",
    "file_size_kb": 15.7,
    "analysis_type": "version_specific_only"
  },
  "raw_rector_output": {
    "totals": {
      "changed_files": 1,
      "errors": 0
    },
    "file_diffs": [
      {
        "file": "selected_100_files/medium_201_500/036_module.tag.apetag.php",
        "diff": "--- Original\n+++ New\n@@ -109,7 +109,7 @@\n \t\t}\n \n \t\t// shortcut\n-\t\t$info['replay_gain'] = array();\n+\t\t$info['replay_gain'] = [];\n \t\t$thisfile_replaygain = &$info['replay_gain'];\n \n \t\tfor ($i = 0; $i < $thisfile_ape['footer']['raw']['tag_items']; $i++) {\n@@ -117,7 +117,7 @@\n \t\t\t$offset += 4;\n \t\t\t$item_flags = getid3_lib::LittleEndian2Int(substr($APEtagData, $offset, 4));\n \t\t\t$offset += 4;\n-\t\t\tif (strstr(substr($APEtagData, $offset), \"\\x00\") === false) {\n+\t\t\tif (!str_contains(substr($APEtagData, $offset), \"\\x00\")) {\n \t\t\t\t$info['error'][] = 'Cannot find null-byte (0x00) seperator between ItemKey #'.$i.' and value. ItemKey starts '.$offset.' bytes into the APE tag, at file offset '.($thisfile_ape['tag_offset_start'] + $offset);\n \t\t\t\treturn false;\n \t\t\t}\n@@ -125,7 +125,7 @@\n \t\t\t$item_key      = strtolower(substr($APEtagData, $offset, $ItemKeyLength));\n \n \t\t\t// shortcut\n-\t\t\t$thisfile_ape['items'][$item_key] = array();\n+\t\t\t$thisfile_ape['items'][$item_key] = [];\n \t\t\t$thisfile_ape_items_current = &$thisfile_ape['items'][$item_key];\n \n \t\t\t$thisfile_ape_items_current['offset'] = $thisfile_ape['tag_offset_start'] + $offset;\n@@ -173,7 +173,7 @@\n \t\t\t\t\tbreak;\n \n \t\t\t\tcase 'mp3gain_undo':\n-\t\t\t\t\tlist($mp3gain_undo_left, $mp3gain_undo_right, $mp3gain_undo_wrap) = explode(',', $thisfile_ape_items_current['data'][0]);\n+\t\t\t\t\t[$mp3gain_undo_left, $mp3gain_undo_right, $mp3gain_undo_wrap] = explode(',', $thisfile_ape_items_current['data'][0]);\n \t\t\t\t\t$thisfile_replaygain['mp3gain']['undo_left']  = intval($mp3gain_undo_left);\n \t\t\t\t\t$thisfile_replaygain['mp3gain']['undo_right'] = intval($mp3gain_undo_right);\n \t\t\t\t\t$thisfile_replaygain['mp3gain']['undo_wrap']  = (($mp3gain_undo_wrap == 'Y') ? true : false);\n@@ -180,13 +180,13 @@\n \t\t\t\t\tbreak;\n \n \t\t\t\tcase 'mp3gain_minmax':\n-\t\t\t\t\tlist($mp3gain_globalgain_min, $mp3gain_globalgain_max) = explode(',', $thisfile_ape_items_current['data'][0]);\n+\t\t\t\t\t[$mp3gain_globalgain_min, $mp3gain_globalgain_max] = explode(',', $thisfile_ape_items_current['data'][0]);\n \t\t\t\t\t$thisfile_replaygain['mp3gain']['globalgain_track_min'] = intval($mp3gain_globalgain_min);\n \t\t\t\t\t$thisfile_replaygain['mp3gain']['globalgain_track_max'] = intval($mp3gain_globalgain_max);\n \t\t\t\t\tbreak;\n \n \t\t\t\tcase 'mp3gain_album_minmax':\n-\t\t\t\t\tlist($mp3gain_globalgain_album_min, $mp3gain_globalgain_album_max) = explode(',', $thisfile_ape_items_current['data'][0]);\n+\t\t\t\t\t[$mp3gain_globalgain_album_min, $mp3gain_globalgain_album_max] = explode(',', $thisfile_ape_items_current['data'][0]);\n \t\t\t\t\t$thisfile_replaygain['mp3gain']['globalgain_album_min'] = intval($mp3gain_globalgain_album_min);\n \t\t\t\t\t$thisfile_replaygain['mp3gain']['globalgain_album_max'] = intval($mp3gain_globalgain_album_max);\n \t\t\t\t\tbreak;\n@@ -221,12 +221,12 @@\n \t\t\t\tcase 'cover art (recording)':\n \t\t\t\tcase 'cover art (studio)':\n \t\t\t\t\t// list of possible cover arts from http://taglib-sharp.sourcearchive.com/documentation/2.0.3.0-2/Ape_2Tag_8cs-source.html\n-\t\t\t\t\tlist($thisfile_ape_items_current['filename'], $thisfile_ape_items_current['data']) = explode(\"\\x00\", $thisfile_ape_items_current['data'], 2);\n+\t\t\t\t\t[$thisfile_ape_items_current['filename'], $thisfile_ape_items_current['data']] = explode(\"\\x00\", $thisfile_ape_items_current['data'], 2);\n \t\t\t\t\t$thisfile_ape_items_current['data_offset'] = $thisfile_ape_items_current['offset'] + strlen($thisfile_ape_items_current['filename'].\"\\x00\");\n \t\t\t\t\t$thisfile_ape_items_current['data_length'] = strlen($thisfile_ape_items_current['data']);\n \n \t\t\t\t\t$thisfile_ape_items_current['image_mime'] = '';\n-\t\t\t\t\t$imageinfo = array();\n+\t\t\t\t\t$imageinfo = [];\n \t\t\t\t\t$imagechunkcheck = getid3_lib::GetDataImageSize($thisfile_ape_items_current['data'], $imageinfo);\n \t\t\t\t\t$thisfile_ape_items_current['image_mime'] = image_type_to_mime_type($imagechunkcheck[2]);\n \n@@ -246,7 +246,7 @@\n \t\t\t\t\t\t\t\tbreak;\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t} elseif (is_string($this->inline_attachments)) {\n-\t\t\t\t\t\t\t$this->inline_attachments = rtrim(str_replace(array('/', '\\\\'), DIRECTORY_SEPARATOR, $this->inline_attachments), DIRECTORY_SEPARATOR);\n+\t\t\t\t\t\t\t$this->inline_attachments = rtrim(str_replace(['/', '\\\\'], DIRECTORY_SEPARATOR, $this->inline_attachments), DIRECTORY_SEPARATOR);\n \t\t\t\t\t\t\tif (!is_dir($this->inline_attachments) || !is_writable($this->inline_attachments)) {\n \t\t\t\t\t\t\t\t// cannot write, skip\n \t\t\t\t\t\t\t\t$info['warning'][] = 'attachment at '.$thisfile_ape_items_current['offset'].' cannot be saved to \"'.$this->inline_attachments.'\" (not writable)';\n@@ -256,7 +256,7 @@\n \t\t\t\t\t\t}\n \t\t\t\t\t\t// if we get this far, must be OK\n \t\t\t\t\t\tif (is_string($this->inline_attachments)) {\n-\t\t\t\t\t\t\t$destination_filename = $this->inline_attachments.DIRECTORY_SEPARATOR.md5($info['filenamepath']).'_'.$thisfile_ape_items_current['data_offset'];\n+\t\t\t\t\t\t\t$destination_filename = $this->inline_attachments.DIRECTORY_SEPARATOR.md5((string) $info['filenamepath']).'_'.$thisfile_ape_items_current['data_offset'];\n \t\t\t\t\t\t\tif (!file_exists($destination_filename) || is_writable($destination_filename)) {\n \t\t\t\t\t\t\t\tfile_put_contents($destination_filename, $thisfile_ape_items_current['data']);\n \t\t\t\t\t\t\t} else {\n@@ -266,9 +266,9 @@\n \t\t\t\t\t\t\tunset($thisfile_ape_items_current['data']);\n \t\t\t\t\t\t} else {\n \t\t\t\t\t\t\tif (!isset($info['ape']['comments']['picture'])) {\n-\t\t\t\t\t\t\t\t$info['ape']['comments']['picture'] = array();\n+\t\t\t\t\t\t\t\t$info['ape']['comments']['picture'] = [];\n \t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t$info['ape']['comments']['picture'][] = array('data'=>$thisfile_ape_items_current['data'], 'image_mime'=>$thisfile_ape_items_current['image_mime']);\n+\t\t\t\t\t\t\t$info['ape']['comments']['picture'][] = ['data'=>$thisfile_ape_items_current['data'], 'image_mime'=>$thisfile_ape_items_current['image_mime']];\n \t\t\t\t\t\t}\n \t\t\t\t\t} while (false);\n \t\t\t\t\tbreak;\n@@ -293,18 +293,18 @@\n \t\t// http://www.uni-jena.de/~pfk/mpp/sv8/apeheader.html\n \n \t\t// shortcut\n-\t\t$headerfooterinfo['raw'] = array();\n+\t\t$headerfooterinfo['raw'] = [];\n \t\t$headerfooterinfo_raw = &$headerfooterinfo['raw'];\n \n-\t\t$headerfooterinfo_raw['footer_tag']   =                  substr($APEheaderFooterData,  0, 8);\n+\t\t$headerfooterinfo_raw['footer_tag']   =                  substr((string) $APEheaderFooterData,  0, 8);\n \t\tif ($headerfooterinfo_raw['footer_tag'] != 'APETAGEX') {\n \t\t\treturn false;\n \t\t}\n-\t\t$headerfooterinfo_raw['version']      = getid3_lib::LittleEndian2Int(substr($APEheaderFooterData,  8, 4));\n-\t\t$headerfooterinfo_raw['tagsize']      = getid3_lib::LittleEndian2Int(substr($APEheaderFooterData, 12, 4));\n-\t\t$headerfooterinfo_raw['tag_items']    = getid3_lib::LittleEndian2Int(substr($APEheaderFooterData, 16, 4));\n-\t\t$headerfooterinfo_raw['global_flags'] = getid3_lib::LittleEndian2Int(substr($APEheaderFooterData, 20, 4));\n-\t\t$headerfooterinfo_raw['reserved']     =                              substr($APEheaderFooterData, 24, 8);\n+\t\t$headerfooterinfo_raw['version']      = getid3_lib::LittleEndian2Int(substr((string) $APEheaderFooterData,  8, 4));\n+\t\t$headerfooterinfo_raw['tagsize']      = getid3_lib::LittleEndian2Int(substr((string) $APEheaderFooterData, 12, 4));\n+\t\t$headerfooterinfo_raw['tag_items']    = getid3_lib::LittleEndian2Int(substr((string) $APEheaderFooterData, 16, 4));\n+\t\t$headerfooterinfo_raw['global_flags'] = getid3_lib::LittleEndian2Int(substr((string) $APEheaderFooterData, 20, 4));\n+\t\t$headerfooterinfo_raw['reserved']     =                              substr((string) $APEheaderFooterData, 24, 8);\n \n \t\t$headerfooterinfo['tag_version']         = $headerfooterinfo_raw['version'] / 1000;\n \t\tif ($headerfooterinfo['tag_version'] >= 2) {\n@@ -329,17 +329,17 @@\n \t}\n \n \tpublic function APEcontentTypeFlagLookup($contenttypeid) {\n-\t\tstatic $APEcontentTypeFlagLookup = array(\n+\t\tstatic $APEcontentTypeFlagLookup = [\n \t\t\t0 => 'utf-8',\n \t\t\t1 => 'binary',\n \t\t\t2 => 'external',\n \t\t\t3 => 'reserved'\n-\t\t);\n-\t\treturn (isset($APEcontentTypeFlagLookup[$contenttypeid]) ? $APEcontentTypeFlagLookup[$contenttypeid] : 'invalid');\n+\t\t];\n+\t\treturn ($APEcontentTypeFlagLookup[$contenttypeid] ?? 'invalid');\n \t}\n \n \tpublic function APEtagItemIsUTF8Lookup($itemkey) {\n-\t\tstatic $APEtagItemIsUTF8Lookup = array(\n+\t\tstatic $APEtagItemIsUTF8Lookup = [\n \t\t\t'title',\n \t\t\t'subtitle',\n \t\t\t'artist',\n@@ -363,8 +363,8 @@\n \t\t\t'abstract',\n \t\t\t'language',\n \t\t\t'bibliography'\n-\t\t);\n-\t\treturn in_array(strtolower($itemkey), $APEtagItemIsUTF8Lookup);\n+\t\t];\n+\t\treturn in_array(strtolower((string) $itemkey), $APEtagItemIsUTF8Lookup);\n \t}\n \n }\n",
        "applied_rectors": [
          "Rector\\Php54\\Rector\\Array_\\LongArrayToShortArrayRector",
          "Rector\\Php70\\Rector\\Ternary\\TernaryToNullCoalescingRector",
          "Rector\\Php71\\Rector\\List_\\ListToArrayDestructRector",
          "Rector\\Php80\\Rector\\NotIdentical\\StrContainsRector",
          "Rector\\Php81\\Rector\\FuncCall\\NullToStrictStringFuncCallArgRector"
        ]
      }
    ],
    "changed_files": [
      "selected_100_files/medium_201_500/036_module.tag.apetag.php"
    ]
  }
}